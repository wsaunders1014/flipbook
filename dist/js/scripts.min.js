var pages=$(".page").length;console.log(pages);var currPage=0,w=window.innerWidth,h=window.innerHeight,pagesShown=w<=h?1:2;$(document).ready(function(){$(".arrow").click(function(){console.log("arrow click");var e=$(".page").width(),t=$(".page").height();if(console.log(e,t),$(this).hasClass("left")&&0!=currPage&&currPage!=pages)console.log("animate page left"),2==pagesShown&&($(".page").eq(currPage-2).addClass("open").css({clip:"rect(0px,"+e+"px,"+t+"px, 0px)",left:"50%"}).find("img").css({left:0}),$(".page").eq(currPage-1).css({textIndent:0}).animate({textIndent:100},{ease:"easeInOut",duration:1e3,step:function(n){$(this).find("img").css({left:n+"%"}),$(this).css({left:n/2+"%"}),$(this).next().css({clip:"rect(0px,"+e+"px,"+t+"px,"+e*(n/100)+"px)"})},complete:function(){$(this).removeClass("open").prev().removeClass("open"),$(this).prev().addClass("open").prev().addClass("open")}})),currPage-=pagesShown;else if($(this).hasClass("right")&&currPage<pages-pagesShown){console.log("animate page right");var n=currPage;$(".page").eq(currPage+2).addClass("opening").css({clip:"rect(0px,"+e+"px,"+t+"px, "+e+"px)"}).find("img").css({left:0}),$(".page").eq(currPage+1).addClass("opening").css({textIndent:100}).animate({textIndent:0},{ease:"easeInOut",duration:1e3,step:function(n){$(this).find("img").css({left:n+"%"}),$(this).css({left:n/2+"%"}),$(this).next().css({clip:"rect(0px,"+e+"px,"+t+"px,"+e*(n/100)+"px)"})},complete:function(){$(".page").eq(n).removeClass("open"),$(".page").eq(n-1).removeClass("open"),$(".opening").removeClass("opening").addClass("open")}}),currPage+=pagesShown}else $(this).hasClass("left")&&(console.log("animate from last page"),$(".page").eq(pages-2).addClass("open opening").find("img").css({left:"-100%"}),$(".page").eq(pages-3).addClass("open"),$(".page").eq(pages-1).css({textIndent:0}).animate({textIndent:100},{ease:"easeInOut",duration:1e3,step:function(n){$(this).css({clip:"rect(0px,"+e+"px,"+t+"px,"+e*(n/100)+"px)"}),$(this).prev().css({left:n/2+"%"}).find("img").css({left:-100+n+"%"})},complete:function(){$(".opening").removeClass("opening")}}),currPage-=pagesShown)}),$("#last-page").on("click",function(){console.log("click"),$(".page").eq(pages-1).addClass("opening").find("img").animate({left:0},400,function(){$(this).parent().removeClass("opening").addClass("open")}),$(".page").css({textIndent:50}).animate({textIndent:0,left:0},{ease:"easeInOut",duration:600,complete:function(){$(this).addClass("open")}}),currPage=pages}),$(".page").dblclick(function(){$(this).toggleClass("zoom"),$(".arrow-holder").toggleClass("hide"),$(this).find("img").css({left:0,top:0})}),$("#page-holder").on("mousedown",".zoom",function(e){var t=$(this),n=t.find("img"),s=n[0].getBoundingClientRect().width,o=n[0].getBoundingClientRect().height,a=t.width(),l=t.height(),c=n.offset().left,i=n.offset().top,p=t.offset().left,u=t.offset().top,g=e.pageX,r=e.pageY,d=o-l-u,m=s-a-p;$(this).on("mousemove",function(e){var t=c+(e.pageX-g),n=i+(e.pageY-r);t>p&&(t=p),t<-m&&(t=-m),n>u&&(n=u),n<-d&&(n=-d),$(this).find("img").offset({left:t,top:n})}).on("mouseup mouseleave",function(){$(this).off("mousemove mouseup mouseleave")})});var e=!1;$("#fullscreen-btn").on("click",function(){e?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=!0,document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen())})});