var pages=$(".page").length;console.log(pages);var currPage=1,w=window.innerWidth,h=window.innerHeight,pagesShown=w<=h?1:2;$(document).ready(function(){$(".arrow").click(function(){var e=$(".page").width(),n=$(".page").height(),t=0;if($(this).hasClass("left")){if(console.log("animate page left"),2==pagesShown&&currPage-pagesShown>=0){console.log("currPage:"+currPage);var s=currPage;t=currPage==pages?1:0,currPage==pages&&console.log("page: "+(currPage-2+t)),$("#page-"+(currPage-2+t)).addClass("open opening").find("img").css({left:"-100%"}),$("#page-"+(currPage-1+t)).css({textIndent:0}).animate({textIndent:100},{ease:"easeInOut",duration:1e3,step:function(t){$(this).css({clip:"rect(0px,"+e+"px,"+n+"px,"+e*(t/100)+"px)"}),$(this).prev().css({left:t/2+"%"}).find("img").css({left:-100+t+"%"})},complete:function(){$(".opening").removeClass("opening"),console.log("currPage: "+currPage,"oldCurr: "+s),$("#page-"+s).removeClass("open").removeAttr("style").find("img").removeAttr("style"),$("#page-"+(s+1)).removeClass("open")}})}currPage-=pagesShown}else if($(this).hasClass("right")&&2==pagesShown&&currPage+1<=pages){console.log("animate page right"),console.log("currPage: "+currPage);s=currPage;currPage==pages-1&&(t=currPage==pages?1:0),$("#page-"+(currPage+2-t)).addClass("opening").css({clip:"rect(0px,"+e+"px,"+n+"px, "+e+"px)"}).find("img").css({left:0}),$("#page-"+(currPage+1-t)).addClass("opening").css({textIndent:100}).animate({textIndent:0},{ease:"easeInOut",duration:1e3,step:function(t){$(this).find("img").css({left:t+"%"}),$(this).css({left:t/2+"%"}),$(this).next().css({clip:"rect(0px,"+e+"px,"+n+"px,"+e*(t/100)+"px)"}),currPage+pagesShown>pages+1&&$(this).next().css({left:t/2+"%"})},complete:function(){$(".opening").removeClass("opening").addClass("open"),console.log("currPage: "+currPage)}}),currPage+=pagesShown}}),$("#last-page").on("click",function(){console.log("click"),$(".page").eq(pages-1).addClass("opening").find("img").animate({left:0},400,function(){$(this).parent().removeClass("opening").addClass("open")}),$(".page").css({textIndent:50}).animate({textIndent:0,left:0},{ease:"easeInOut",duration:600,complete:function(){$(".page").not(":last-child").addClass("open")}}),currPage=pages}),$(".page").dblclick(function(){$(this).toggleClass("zoom"),$(".arrow-holder").toggleClass("hide"),$(this).find("img").css({left:0,top:0})}),$("#page-holder").on("mousedown",".zoom",function(e){var n=$(this),t=n.find("img"),s=t[0].getBoundingClientRect().width,o=t[0].getBoundingClientRect().height,a=n.width(),c=n.height(),l=t.offset().left,g=t.offset().top,r=n.offset().left,i=n.offset().top,u=e.pageX,p=e.pageY,m=o-c-i,d=s-a-r;$(this).on("mousemove",function(e){var n=l+(e.pageX-u),t=g+(e.pageY-p);n>r&&(n=r),n<-d&&(n=-d),t>i&&(t=i),t<-m&&(t=-m),$(this).find("img").offset({left:n,top:t})}).on("mouseup mouseleave",function(){$(this).off("mousemove mouseup mouseleave")})});var e=!1;$("#fullscreen-btn").on("click",function(){e?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=!0,document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen())})});