var pages=$(".page").length;console.log(pages);var currPage=0,w=window.innerWidth,h=window.innerHeight,pagesShown=w<=h?1:2;$(document).ready(function(){$(".arrow").click(function(){console.log("arrow click");var e=$(".page").width(),t=$(".page").height();if(console.log(e,t),$(this).hasClass("left")&&0!=currPage)2==pagesShown&&($(".page").eq(currPage-2).addClass("open").css({clip:"rect(0px,"+e+"px,"+t+"px, 0px)"}).find("img").css({left:0}),$(".page").eq(currPage-1).css({textIndent:0}).animate({textIndent:100},{ease:"easeInOut",duration:1e3,step:function(n){$(this).find("img").css({left:n+"%"}),$(this).css({left:n/2+"%"}),$(this).next().css({clip:"rect(0px,"+e+"px,"+t+"px,"+e*(n/100)+"px)"})},complete:function(){$(".open").removeClass("open"),$(this).prev().addClass("open").prev().addClass("open")}})),currPage-=pagesShown;else if($(this).hasClass("right")&&currPage<pages-pagesShown){var n=currPage;$(".page").eq(currPage+2).addClass("opening").css({clip:"rect(0px,"+e+"px,"+t+"px, "+e+"px)"}).find("img").css({left:0}),$(".page").eq(currPage+1).addClass("opening").css({textIndent:100}).animate({textIndent:0},{ease:"easeInOut",duration:1e3,step:function(n){$(this).find("img").css({left:n+"%"}),$(this).css({left:n/2+"%"}),$(this).next().css({clip:"rect(0px,"+e+"px,"+t+"px,"+e*(n/100)+"px)"})},complete:function(){$(".page").eq(n).removeClass("open"),$(".page").eq(n-1).removeClass("open"),$(".opening").removeClass("opening").addClass("open")}}),currPage+=pagesShown}else $(this).hasClass("right")&&($(".page").eq(currPage+1).addClass("opening").css({zIndex:5,textIndent:100}).animate({textIndent:0},{ease:"easeInOut",duration:1e3,step:function(e){$(this).find("img").css({left:e+"%"}),$(".page").css({left:e/2+"%"}),$(this).css({left:e/2+"%"})}}),currPage=pages)}),$("#last-page").on("click",function(){$(".page").eq(pages-1).addClass("opening").css({zIndex:5,textIndent:100}).animate({textIndent:0},{ease:"easeInOut",duration:1e3,step:function(e){}}),currPage=pages}),$(".page").dblclick(function(){$(this).toggleClass("zoom"),$(".arrow").toggleClass("hide"),$(this).find("img").css({left:0,top:0})}),$("#page-holder").on("mousedown",".zoom",function(e){var t=$(this),n=t.find("img"),s=n[0].getBoundingClientRect().width,o=n[0].getBoundingClientRect().height,c=t.width(),a=t.height(),i=n.offset().left,l=n.offset().top,u=t.offset().left,p=t.offset().top,r=e.pageX,g=e.pageY,d=o-a-p,m=s-c-u;$(this).on("mousemove",function(e){var t=i+(e.pageX-r),n=l+(e.pageY-g);t>u&&(t=u),t<-m&&(t=-m),n>p&&(n=p),n<-d&&(n=-d),$(this).find("img").offset({left:t,top:n})}).on("mouseup mouseleave",function(){$(this).off("mousemove mouseup mouseleave")})});var e=!1;$("#fullscreen-btn").on("click",function(){e?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=!0,document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen())})});